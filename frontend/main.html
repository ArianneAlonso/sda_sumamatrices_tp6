<!doctype html>
<html lang="es">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>sda tp6 suma de matrices</title>
</head>
<body>
    <h1>suma de matrices</h1>

    <form id="form-matrices">
        <label for="filas">filas:</label>
        <input type="number" id="filas" name="filas" required><br><br>
        
        <label for="columnas">columnas:</label>
        <input type="number" id="columnas" name="columnas" required><br><br>
        
        <button type="submit">generar matrices</button>
    </form>

    <div id="matrices-container"></div>
    <button id="sumar-btn" style="display: none;">sumar matrices</button>
    <h2>resultado:</h2>
    <pre id="resultado"></pre>

    <script>
        document.getElementById('form-matrices').addEventListener('submit', function(event) {
            event.preventDefault();

            const filas = parseInt(document.getElementById('filas').value);
            const columnas = parseInt(document.getElementById('columnas').value);
            
            if (!filas || !columnas) {
                alert("por favor, ingrese las filas y columnas correctamente.");
                return;
            }

            const matricesContainer = document.getElementById('matrices-container');
            matricesContainer.innerHTML = '';

            for (let i = 0; i < 2; i++) {
                const matrixLabel = document.createElement('h3');
                matrixLabel.innerText = `matriz ${i + 1}:`;

                const matrixTable = document.createElement('table');
                for (let j = 0; j < filas; j++) {
                    const row = document.createElement('tr');
                    for (let k = 0; k < columnas; k++) {
                        const cell = document.createElement('td');
                        const input = document.createElement('input');
                        input.type = 'number';
                        input.id = `matriz${i + 1}-fila${j}-columna${k}`;
                        cell.appendChild(input);
                        row.appendChild(cell);
                    }
                    matrixTable.appendChild(row);
                }
                matricesContainer.appendChild(matrixLabel);
                matricesContainer.appendChild(matrixTable);
            }

            document.getElementById('sumar-btn').style.display = 'block';
        });

        document.getElementById('sumar-btn').addEventListener('click', async function() {
            const filas = parseInt(document.getElementById('filas').value);
            const columnas = parseInt(document.getElementById('columnas').value);

            const matriz1 = [];
            const matriz2 = [];

            for (let i = 0; i < filas; i++) {
                matriz1[i] = [];
                matriz2[i] = [];
                for (let j = 0; j < columnas; j++) {
                    matriz1[i][j] = parseInt(document.getElementById(`matriz1-fila${i}-columna${j}`).value);
                    matriz2[i][j] = parseInt(document.getElementById(`matriz2-fila${i}-columna${j}`).value);
                }
            }

            const response = await fetch('/sumarmatrices', {
                method: 'post',
                headers: {
                    'content-type': 'application/json'
                },
                body: JSON.stringify({
                    filas,
                    columnas,
                    matriz1,
                    matriz2
                })
            });

            const data = await response.json();
            const resultado = data.resultado;

            const resultadoElement = document.getElementById('resultado');
            resultadoElement.innerHTML = JSON.stringify(resultado, null, 2);
        });
    </script>
</body>
</html>